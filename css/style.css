:root{
  --bg:#0a1128; 
  --panel:#f9fafb;
  --ink:#111827;
  --muted:#4b5563;
  --accent:#2563eb;
  --accent-2:#7c3aed;
  --accent-3:#10b981;
  --accent-4:#f59e0b;
  --danger:#dc2626;
  --ghost:#e5e7eb;
  --ring:#d1d5db;
  --chip:#ffffff;
}

* { box-sizing: border-box; }
html, body {
  height:100%;
  margin:0;
  background:var(--bg);
  color:var(--ink);
  font:14px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,"Helvetica Neue",Arial,"Noto Sans",sans-serif;
}

#app { display:grid; grid-template-columns:320px 1fr; height:100vh; }

/* SIDE PANEL */
aside#controls {
  padding:16px 14px 18px;
  background:var(--panel);
  border-right:1px solid var(--ring);
  overflow:auto;
}
aside h1 { margin:0 0 12px; font-size:18px; font-weight:700; letter-spacing:.2px; }

.group {
  margin:14px 0 18px;
  padding:12px;
  background:#fff;
  border:1px solid var(--ring);
  border-radius:12px;
}
.group-title {
  font-weight:700;
  font-size:12px;
  text-transform:uppercase;
  letter-spacing:.14em;
  color:var(--muted);
  margin-bottom:8px;
}

.radio,.checkbox { display:flex; align-items:center; gap:8px; margin:6px 0; cursor:pointer; }
.radio input,.checkbox input { accent-color:var(--accent); }
.radio-row { display:flex; gap:16px; }
.group-icons .checkbox .icon { margin-left:2px; }

#controls img.icon { width:22px; height:22px; object-fit:contain; display:inline-block; }

/* SLIDERS */
.slider-row { display:grid; gap:6px; margin:8px 0; }
.slider-row label { color:var(--muted); font-size:12px; }
.slider-values { font-size:12px; color:var(--muted); }
.toggle-row { margin:6px 0 8px; }

/* MAP CONTAINER */
main#viz { position:relative; min-height:70vh; background:#0a1128; } /* dark navy */
#map { width:100%; height:100%; display:block; cursor:grab; }
#map:active { cursor:grabbing; }

/* STROKE scaling */
.country,.plate-boundary,.quakes .ring { vector-effect:non-scaling-stroke; }

/* TOOLTIP */
#tooltip {
  position:absolute; pointer-events:none;
  background:#fff; border:1px solid var(--ring);
  padding:10px 12px; border-radius:10px;
  min-width:220px; max-width:320px;
  box-shadow:0 4px 16px rgba(0,0,0,.1);
  transform:translate(-50%,-100%);
  color:var(--ink);
}
#tooltip.hidden { display:none; }
#tooltip h3 { margin:0 0 6px; font-size:14px; color:var(--ink); }
#tooltip .meta { color:var(--muted); font-size:12px; margin-bottom:6px; }

/* ZOOM + STATUS */
#zoomControls {
  position:absolute; right:12px; top:12px;
  display:flex; flex-direction:column; gap:6px; align-items:center;
}
#zoomControls button {
  width:36px; height:36px; border-radius:10px;
  border:1px solid var(--ring); background:#fff;
  font-weight:700; font-size:18px; cursor:pointer;
}
#zoomControls button[disabled]{ opacity:.5; cursor:not-allowed; }
#zoomStatus {
  font-size:12px; color:var(--muted);
  padding:4px 6px; background:#fff;
  border:1px solid var(--ring); border-radius:8px;
}

/* TIMELINE */
#mapTimeline {
  position:absolute; left:0; right:0; bottom:0;
  padding:10px 12px 12px; background:rgba(255,255,255,0.85);
  border-top:1px solid var(--ring);
  display:grid; gap:6px; justify-items:center;
}
#mapTimeline .timeline-row {
  width:min(980px,92%);
  display:grid; grid-template-columns:auto 1fr auto auto auto;
  gap:10px; align-items:center;
}
#mapTimeline input[type="range"] { width:100%; height:10px; }
#mapTimeline button {
  padding:10px 12px; border-radius:10px;
  border:1px solid var(--ring); background:#fff;
  font-weight:600;
}
#mapTimeline .small button { padding:6px 8px; font-size:12px; }
#timeLabel { font-size:13px; color:var(--muted); }

#btnClearFilters {
  padding:10px 12px;
  border-radius:10px;
  border:1px solid var(--ring);
  background:#fff;
  font-weight:600;
}

/* LEGENDS */
#legendPanel .legend-row {
  display:flex; align-items:center; gap:10px;
  margin:6px 0;
}
#legendPanel .swatch {
  width:14px; height:14px;
  border-radius:3px;
  border:1px solid var(--ring);
}
#sizeLegend svg { width:100%; height:80px; }
.size-circle { fill:none; stroke:var(--muted); }
.legend-subtitle {
  font-size:11px; font-weight:600;
  color:var(--muted);
  margin-bottom:6px;
  text-transform:uppercase;
  letter-spacing:.06em;
}

/* INTRO OVERLAY */
#introOverlay {
  position:fixed; inset:0;
  background:#0a0d1a;
  color:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  z-index:9999;
  overflow:hidden;
}

#introOverlay h1 {
  font-size:32px;
  font-weight:700;
  margin-bottom:24px;
  letter-spacing:0.04em;
  text-align:center;
}

#introOverlay button {
  background:#dc2626;
  border:none;
  color:#fff;
  font-weight:600;
  padding:12px 28px;
  border-radius:10px;
  font-size:16px;
  cursor:pointer;
  transition:transform .2s ease,background .3s ease;
}
#introOverlay button:hover {
  transform:scale(1.05);
  background:#b91c1c;
}

/* Animated pulsing circles */
#introOverlay svg {
  position:absolute;
  width:100%; height:100%;
  top:0; left:0;
}
.pulse {
  fill:none; stroke:#dc2626; stroke-width:2;
  opacity:0.5; animation:pulse 2.4s infinite ease-out;
}
@keyframes pulse {
  0% { r:40; opacity:.7; }
  100% { r:500; opacity:0; }
}

@media(max-width:980px){
  #app{ grid-template-columns:1fr; }
  aside#controls{ order:2; }
  main#viz{ order:1; height:60vh; }
}

#introOverlay svg {
  pointer-events: none; 
  z-index: 0;
}
#introOverlay h1,
#introOverlay p,
#introOverlay button {
  position: relative;
  z-index: 2;
}

/* stack legend */
#legendPanel .legend-row.stacked{
  display:flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 6px;                /* little space between title and circles */
}
#legendPanel .legend-row.stacked .legend-title{
  display:flex;
  align-items:center;
  gap:8px;                 /* swatch â†” label gap */
}

#tooltip {
  line-height: 1.28;
}
#tooltip .badge {
  margin: 2px 0;
  display: inline-block;
}

/* Quake Detail sidepanel */
#quakeDetailPanel {
    position: fixed;
    right: 0;
    top: 0;
    width: 380px;
    height: 100vh;
    background: white;
    box-shadow: -4px 0 20px rgba(0,0,0,0.15);
    z-index: 1000;
    transform: translateX(100%);
    transition: transform 0.3s ease;
    overflow-y: auto;
    padding: 20px;
}

#quakeDetailPanel:not(.hidden) {
    transform: translateX(0);
}

#closePanelBtn {
    position: absolute;
    top: 16px;
    right: 16px;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    border: 1px solid #e5e7eb;
    background: #f9fafb;
    font-size: 28px;
    line-height: 1;
    cursor: pointer;
    color: #6b7280;
}

#closePanelBtn:hover {
    background: #fee2e2;
    border-color: #fca5a5;
    color: #dc2626;
}

#panelContent {
    margin-top: 40px;
}

.detail-section {
    margin-bottom: 20px;
    padding-bottom: 20px;
    border-bottom: 1px solid #e5e7eb;
}

.detail-section:last-child {
    border-bottom: none;
}

.detail-title {
    font-size: 20px;
    font-weight: 700;
    color: #0f172a;
    margin-bottom: 8px;
}

.detail-meta {
    font-size: 13px;
    color: #64748b;
    margin-bottom: 16px;
}

.detail-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
}

.detail-item {
    padding: 10px;
    background: #f8fafc;
    border-radius: 8px;
    border: 1px solid #e2e8f0;
}

.detail-item-label {
    font-size: 11px;
    color: #64748b;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 4px;
}

.detail-item-value {
    font-size: 18px;
    font-weight: 700;
    color: #0f172a;
}


